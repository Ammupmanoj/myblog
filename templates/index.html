{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
    <section class="hero">
        <h2>Welcome to My Blog</h2>
        <p>This is a simple blog website built with Flask.</p>
        {% if 'username' not in session %}
            <p><a href="{{ url_for('register') }}">Register</a> or <a href="{{ url_for('login') }}">Login</a> to create posts.</p>
        {% endif %}
    </section>
    
    <section class="posts">
        <h2>Recent Posts</h2>
        
        {% if posts %}
            {% for post in posts %}
                <article class="post">
                    {% if 'username' in session and post.author == session['username'] %}
                        <a href="{{ url_for('delete_post', post_id=post.id) }}" class="delete-btn" onclick="return confirm('Are you sure you want to delete this post?')">
                            <i class="fas fa-trash"></i>
                        </a>
                    {% endif %}
                    <h3><a href="{{ url_for('post', post_id=post.id) }}">{{ post.title }}</a></h3>
                    <p class="meta">By {{ post.author }} on {{ post.date_posted }}</p>
                    <p>{{ post.content[:100] }}{% if post.content|length > 100 %}...{% endif %}</p>
                    <a href="{{ url_for('post', post_id=post.id) }}" class="read-more">Read More</a>
                </article>
            {% endfor %}
        {% else %}
            <p>No posts yet. Be the first to <a href="{{ url_for('create') }}">create a post</a>!</p>
        {% endif %}
    </section>
{% endblock %}